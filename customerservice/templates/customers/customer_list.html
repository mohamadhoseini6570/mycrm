{% extends 'new_base.html' %}
{% block content %}
    <div id="sm_ten" class="col-sm-10">
        <div class="add_obj">
            <button type = 'button' class="btn btn-success">
                <a href = "{% url 'customerservice:customer-create' %}" >افزودن مشترک</a>
            </button>
        </div>
            <!-- https://stackoverflow.com/questions/45696685/search-input-with-an-icon-bootstrap -->
            <div class="p-3">
                <form method='post' action='{% url 'customerservice:customers-search' %}'>
                    {% csrf_token %}
                    <div class="input-group">
                        <input class="form-control border-end-0 border rounded-pill" placeholder = 'جستجوی مشترک' name = 'searched' type="search" id="example-search-input" >
                        <span class="input-group-append">
                            <button class="btn btn-outline-secondary bg-white border-start-0 border rounded-pill ms-n3 invisible" type="button">
                                <!-- <i class="fa fa-search"></i> -->
                            </button>
                        </span>
                    </div>
                </form>
            </div>
            <!-- <form method='post' action='{% url 'customerservice:customers-search' %}'>
                {% csrf_token %}
                <input type='search' placeholder = 'جستجو' name = 'searched'>
                
                <input type="submit" value="جستجو">
            </form>
            <form method='post' action='{% url 'customerservice:customers-searchp' %}'>
                {% csrf_token %}
                <input type='search' placeholder = 'جستجو' name = 'searched'>
                
                <input type="submit" value="جستجو پی">
            </form> -->
            <!-- <form method='post' action='{% url 'customerservice:new-customers-search' %}'>
                {% csrf_token %}
                <input type='search' placeholder = 'جستجو' name = 'searched'>
                
                <input type="submit" value="جستجوی جدید">
            </form> -->
            <div class="list_legend">لیست مشترکین:</div>
            {%if customer_list%}
                    <div class="table-responsive">
                        <table class="table table-striped table-hover table-bordered">
                            <thead>
                                    <tr>
                                        <th scope="col">نام</th>
                                        <th scope="col">برند</th>   
                                        <th scope="col">شهر</th>   
                                        <th scope="col">آدرس</th>   
                                        <th scope="col">تلفن</th>   
                                        <th scope="col">نوع</th>   
                                        <th scope="col">توضیحات</th>   
                                    </tr>
                            </thead>
                            <tbody>
                                {% for x in customer_list%}
                                    <tr>
                                        <th scope="row"><a 
                                            href = "{{x.get_absolute_url }}">
                                            {{x.commercialname}}</a></th>
                                        <td>{{x.brand}}</td>    
                                        <td>{{x.city}}</td>    
                                        <td>{{x.address}}</td>    
                                        <td>{{x.phone}}</td>    
                                        <td>{{x.kind}}</td>    
                                        <td>{{x.notes}}</td>    
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
            {% else %}
                <p>مشترکی وجود ندارد!</p>
            {% endif %}
            <nav aria-label="Page navigation example">
                <ul class="pagination">
                        {% if page_obj.has_previous %}
                            <li class="page-item"><a class="page-link" 
                                href = '?page=1'>&laquo; اولین</a></li>
                            <li class="page-item"><a class="page-link" 
                            href = '?page={{page_obj.previous_page_number}}'>قبلی</a></li>
                        {% endif %}
                            <li class="page-item disabled"><a class="page-link" 
                                href="#">صفحه {{page_obj.number}} از 
                                {{page_obj.paginator.num_pages}}</a></li>    
                        {% if page_obj.has_next %}
                            <li class="page-item"><a class="page-link" 
                                href = '?page={{page_obj.next_page_number}}'>بعدی</a></li>
                            <li class="page-item"><a class="page-link" 
                                href = '?page={{page_obj.paginator.num_pages}}'>
                                آخرین &raquo; </a></li>
                        {% endif %}
                </ul>
            </nav>
    <!-- col-sm-10 -->
    </div>
{% endblock %}